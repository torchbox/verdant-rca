{% load wagtailcore_tags wagtailimages_tags %}

<div class="events-block homepage-block homepage-block--full-width">

    <div class="events-block__header homepage-block__wrapper">
        <h2 class="events-block__title homepage-heading homepage-heading--white">Events</h2>
        <a class="events-block__more" href="{% pageurl value.more_events_link %}">
            More events
            <svg class="events-block__more-arrow" aria-hidden="true">
                <title>Arrow</title>
                <use xlink:href="#arrow-thin"></use>
            </svg>
        </a>
    </div>

    <div class="homepage-block__slider-wrapper">
        <div class="events-block__slider js-events">
            {% for event in events %}
                <div class="events-block__slide">
                    <a href="{% pageurl event %}" class="event-item">
                        {% image event.feed_image fill-980x552 as event_image %}

                        <div class="event-item__wrapper">
                            <div class="event-item__image-wrapper">
                                <img
                                    src="{{ event_image.url }}"
                                    width="{{ event_image.width }}"
                                    height="{{ event_image.height }}"
                                    alt="{{ event_image.alt }}"
                                    class="event-item__image" />
                            </div>

                            {% with event.next_date_time as event_dates %}
                                <span class="event-item__dates">
                                    {{ event_dates.date_from|date:"j F" }}{% if event_dates.date_to %} - {{ event_dates.date_to|date:"j F" }}{% endif %}
                                </span>
                            {% endwith %}
                        </div>

                        <h3 class="event-item__title">{{ event.title }}</h3>

                        {# <span class="event-item__strapline">{{ event.strapline }}</span> #}

                        <span class="event-item__audience">{{ event.get_audience_display }}</span>
                    </a>
                </div>
            {% endfor %}
        </div>
    </div>
</div>
